<!DOCTYPE html>
<html>
<head>
  <title>GameState.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../doc-style.css" />
  <script src="../doc-filelist.js"></script>
  <script>
    var relativeDir = '../', thisFile = 'lib/GameState.js', defaultSidebar = true;
  </script>
  <script src="../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h1">
        <a href="#gamestate">GameState</a>
      </div>
      <div class="heading h2">
        <a href="#global-scope">Global scope</a>
      </div>
      <div class="heading h3">
        <a href="#gamestate.iss">GameState.iss</a>
      </div>
      <div class="heading h3">
        <a href="#gamestate.defaults.hash">GameState.defaults.hash</a>
      </div>
      <div class="heading h2">
        <a href="#gamestate-constructor">GameState constructor</a>
      </div>
      <div class="heading h2">
        <a href="#public-properties">Public properties</a>
      </div>
      <div class="heading h3">
        <a href="#gamestate.state">GameState.state</a>
      </div>
      <div class="heading h3">
        <a href="#gamestate.step">GameState.step</a>
      </div>
      <div class="heading h3">
        <a href="#gamestate.round">GameState.round</a>
      </div>
      <div class="heading h3">
        <a href="#gamestate.is">GameState.is</a>
      </div>
      <div class="heading h3">
        <a href="#gamestate.paused">GameState.paused</a>
      </div>
      <div class="heading h2">
        <a href="#gamestate.tostring">GameState.toString</a>
      </div>
      <div class="heading h2">
        <a href="#gamestate.tohash">GameState.toHash</a>
      </div>
      <div class="heading h2">
        <a href="#gamestate.tohash--static-">GameState.toHash (static)</a>
      </div>
      <div class="heading h2">
        <a href="#gamestate.compare--static-">GameState.compare (static)</a>
      </div>
      <div class="heading h2">
        <a href="#gamestate.stringify--static-">GameState.stringify (static)</a>
      </div>
      <div class="heading h2">
        <a href="#closure">Closure</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamestate">
  <h1>
    <a href="#gamestate" class="pilcrow">&#182;</a>
    GameState
  </h1>
</div>

  </div>
  <div class="body"><p>Copyright(c) 2012 Stefano Balietti
MIT Licensed </p>

<p>Representation of the state of a game: </p>


<div class="highlight"><pre><code><span class="sb">`state`</span><span class="p">:</span> <span class="n">the</span> <span class="n">higher</span><span class="o">-</span><span class="n">level</span> <span class="n">building</span> <span class="n">blocks</span> <span class="n">of</span> <span class="n">a</span> <span class="n">game</span>
<span class="sb">`step`</span><span class="p">:</span> <span class="n">the</span> <span class="n">sub</span><span class="o">-</span><span class="n">unit</span> <span class="n">of</span> <span class="n">a</span> <span class="n">state</span>
<span class="sb">`round`</span><span class="p">:</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">repetition</span> <span class="k">for</span> <span class="n">a</span> <span class="n">state</span><span class="o">.</span> <span class="n">Defaults</span> <span class="n">round</span> <span class="o">=</span> <span class="mi">1</span>
<span class="sb">`is`</span><span class="p">:</span> <span class="n">the</span> <span class="o">*</span><span class="n">load</span><span class="o">-</span><span class="n">lavel</span><span class="o">*</span> <span class="n">of</span> <span class="n">the</span> <span class="n">game</span> <span class="n">as</span> <span class="n">expressed</span> <span class="n">in</span> <span class="sb">`GameState.iss`</span>
<span class="sb">`paused`</span><span class="p">:</span> <span class="n">TRUE</span> <span class="k">if</span> <span class="n">the</span> <span class="n">game</span> <span class="n">is</span> <span class="n">paused</span>
</code></pre></div>


  </div>
  <div class="details">
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">GameLoop</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="global-scope">
  <h2>
    <a href="#global-scope" class="pilcrow">&#182;</a>
    Global scope
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>  
<span class="kd">var</span> <span class="nx">JSUS</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">JSUS</span><span class="p">;</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3">&#182;</a>
</div>
<p>Expose constructor</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">exports</span><span class="p">.</span><span class="nx">GameState</span> <span class="o">=</span> <span class="nx">GameState</span><span class="p">;</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamestate.iss">
  <h3>
    <a href="#gamestate.iss" class="pilcrow">&#182;</a>
    GameState.iss
  </h3>
</div>


<p>Numeric representation of the state of the nodeGame engine 
the game</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameState</span><span class="p">.</span><span class="nx">iss</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">GameState</span><span class="p">.</span><span class="nx">iss</span><span class="p">.</span><span class="nx">UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>    <span class="c1">// Game has not been initialized</span>
<span class="nx">GameState</span><span class="p">.</span><span class="nx">iss</span><span class="p">.</span><span class="nx">LOADING</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>   <span class="c1">// The game is loading</span>
<span class="nx">GameState</span><span class="p">.</span><span class="nx">iss</span><span class="p">.</span><span class="nx">LOADED</span>  <span class="o">=</span> <span class="mi">25</span><span class="p">;</span>   <span class="c1">// Game is loaded, but the GameWindow could still require some time</span>
<span class="nx">GameState</span><span class="p">.</span><span class="nx">iss</span><span class="p">.</span><span class="nx">PLAYING</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>   <span class="c1">// Everything is ready</span>
<span class="nx">GameState</span><span class="p">.</span><span class="nx">iss</span><span class="p">.</span><span class="nx">DONE</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>   <span class="c1">// The player completed the game state</span>

<span class="nx">GameState</span><span class="p">.</span><span class="nx">defaults</span> <span class="o">=</span> <span class="p">{};</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamestate.defaults.hash">
  <h3>
    <a href="#gamestate.defaults.hash" class="pilcrow">&#182;</a>
    GameState.defaults.hash
  </h3>
</div>

  </div>
  <div class="body"><p>Default hash string for game-states</p>


<div class="highlight"><pre><code><span class="nv">@see</span> <span class="n">GameState</span><span class="o">.</span><span class="n">toHash</span>
</code></pre></div>


  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameState</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">hash</span> <span class="o">=</span> <span class="s1">&#39;S.s.r.i.p&#39;</span><span class="p">;</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamestate-constructor">
  <h2>
    <a href="#gamestate-constructor" class="pilcrow">&#182;</a>
    GameState constructor
  </h2>
</div>

  </div>
  <div class="body"><p>Creates an instance of a GameState </p>

<p>It accepts an object literal or an hash string as defined in <code>GameState.defaults.hash</code>.</p>

<p>If no parameter is passed, all the properties of the GameState 
object are set to 0</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span>gs</span>
      <span class="dox_type">object</span>
      <span class="dox_type">string</span>
      <span>An object literal | hash string representing the game state</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">GameState</span> <span class="p">(</span><span class="nx">gs</span><span class="p">)</span> <span class="p">{</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="public-properties">
  <h2>
    <a href="#public-properties" class="pilcrow">&#182;</a>
    Public properties
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamestate.state">
  <h3>
    <a href="#gamestate.state" class="pilcrow">&#182;</a>
    GameState.state
  </h3>
</div>

  </div>
  <div class="body"><p>The N-th game-block (state) in the game-loop currently being executed</p>


<div class="highlight"><pre><code><span class="nv">@see</span> <span class="n">GameLoop</span>
</code></pre></div>


  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span>  <span class="mi">0</span><span class="p">;</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamestate.step">
  <h3>
    <a href="#gamestate.step" class="pilcrow">&#182;</a>
    GameState.step
  </h3>
</div>

  </div>
  <div class="body"><p>The N-th game-block (step) nested in the current state</p>


<div class="highlight"><pre><code><span class="nv">@see</span> <span class="n">GameState</span><span class="o">.</span><span class="n">state</span>
</code></pre></div>


  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">step</span> <span class="o">=</span>   <span class="mi">0</span><span class="p">;</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamestate.round">
  <h3>
    <a href="#gamestate.round" class="pilcrow">&#182;</a>
    GameState.round
  </h3>
</div>

  </div>
  <div class="body"><p>The number of times the current state was repeated</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">round</span> <span class="o">=</span>  <span class="mi">0</span><span class="p">;</span>
  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamestate.is">
  <h3>
    <a href="#gamestate.is" class="pilcrow">&#182;</a>
    GameState.is
  </h3>
</div>

  </div>
  <div class="body"><p>@see GameState.iss</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">is</span> <span class="o">=</span>     <span class="nx">GameState</span><span class="p">.</span><span class="nx">iss</span><span class="p">.</span><span class="nx">UNKNOWN</span><span class="p">;</span>
  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamestate.paused">
  <h3>
    <a href="#gamestate.paused" class="pilcrow">&#182;</a>
    GameState.paused
  </h3>
</div>

  </div>
  <div class="body"><p>TRUE if the game is paused</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">paused</span> <span class="o">=</span>   <span class="kc">false</span><span class="p">;</span>
  
  <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;string&#39;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">gs</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">tokens</span> <span class="o">=</span> <span class="nx">gs</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">);</span>   
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span>  <span class="p">(</span><span class="s1">&#39;undefined&#39;</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="nx">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">?</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">step</span> <span class="o">=</span>   <span class="p">(</span><span class="s1">&#39;undefined&#39;</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="nx">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">?</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">round</span> <span class="o">=</span>  <span class="p">(</span><span class="s1">&#39;undefined&#39;</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="nx">tokens</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">?</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">tokens</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">is</span> <span class="o">=</span>     <span class="p">(</span><span class="s1">&#39;undefined&#39;</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="nx">tokens</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">?</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">tokens</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">:</span> <span class="nx">GameState</span><span class="p">.</span><span class="nx">iss</span><span class="p">.</span><span class="nx">UNKNOWN</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">paused</span> <span class="o">=</span>   <span class="p">(</span><span class="nx">tokens</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="kc">true</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;object&#39;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">gs</span><span class="p">)</span> <span class="p">{</span>  
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span>  <span class="nx">gs</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">step</span> <span class="o">=</span>   <span class="nx">gs</span><span class="p">.</span><span class="nx">step</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">round</span> <span class="o">=</span>  <span class="nx">gs</span><span class="p">.</span><span class="nx">round</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">is</span> <span class="o">=</span>     <span class="p">(</span><span class="nx">gs</span><span class="p">.</span><span class="nx">is</span><span class="p">)</span> <span class="o">?</span> <span class="nx">gs</span><span class="p">.</span><span class="nx">is</span> <span class="o">:</span> <span class="nx">GameState</span><span class="p">.</span><span class="nx">iss</span><span class="p">.</span><span class="nx">UNKNOWN</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">paused</span> <span class="o">=</span>   <span class="p">(</span><span class="nx">gs</span><span class="p">.</span><span class="nx">paused</span><span class="p">)</span> <span class="o">?</span> <span class="nx">gs</span><span class="p">.</span><span class="nx">paused</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  
<span class="p">}</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamestate.tostring">
  <h2>
    <a href="#gamestate.tostring" class="pilcrow">&#182;</a>
    GameState.toString
  </h2>
</div>

  </div>
  <div class="body"><p>Converts the current instance of GameState to a string</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span></span>
      <span class="dox_type">string</span>
      <span>out The string representation of the state of the GameState</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">out</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">toHash</span><span class="p">(</span><span class="s1">&#39;(r) S.s&#39;</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">paused</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">out</span> <span class="o">+=</span> <span class="s1">&#39; [P]&#39;</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">out</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamestate.tohash">
  <h2>
    <a href="#gamestate.tohash" class="pilcrow">&#182;</a>
    GameState.toHash
  </h2>
</div>

  </div>
  <div class="body"><p>Returns a simplified hash of the state of the GameState,
according to the input string</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span>str</span>
      <span class="dox_type">string</span>
      <span>The hash code</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span></span>
      <span class="dox_type">string</span>
      <span>hash The hashed game states</span>
    </div>
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">GameState.toHash (static)</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toHash</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">GameState</span><span class="p">.</span><span class="nx">toHash</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">str</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamestate.tohash--static-">
  <h2>
    <a href="#gamestate.tohash--static-" class="pilcrow">&#182;</a>
    GameState.toHash (static)
  </h2>
</div>

  </div>
  <div class="body"><p>Returns a simplified hash of the state of the GameState,
according to the input string. </p>

<p>The following characters are valid to determine the hash string</p>


<div class="highlight"><pre><code><span class="o">-</span> <span class="n">S:</span> <span class="n">state</span>
<span class="o">-</span> <span class="n">s:</span> <span class="n">step</span>
<span class="o">-</span> <span class="n">r:</span> <span class="n">round</span>
<span class="o">-</span> <span class="n">i:</span> <span class="n">is</span>
<span class="o">-</span> <span class="n">P:</span> <span class="n">paused</span>
</code></pre></div>



<p>E.g. </p>


<div class="highlight"><pre><code>        <span class="kd">var</span> <span class="nx">gs</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GameState</span><span class="p">({</span>
                            <span class="nx">round</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
                            <span class="nx">state</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
                            <span class="nx">step</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
                            <span class="nx">is</span><span class="o">:</span> <span class="mi">50</span><span class="p">,</span>
                            <span class="nx">paused</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="p">});</span>

        <span class="nx">gs</span><span class="p">.</span><span class="nx">toHash</span><span class="p">(</span><span class="s1">&#39;(R) S.s&#39;</span><span class="p">);</span> <span class="c1">// (1) 2.1</span>
</code></pre></div>


  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span>gs</span>
      <span class="dox_type">GameState</span>
      <span>The game state to hash</span>
    </div>
    <div class="dox_tag_detail">
      <span>str</span>
      <span class="dox_type">string</span>
      <span>The hash code</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span></span>
      <span class="dox_type">string</span>
      <span>hash The hashed game states</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameState</span><span class="p">.</span><span class="nx">toHash</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">gs</span><span class="p">,</span> <span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">gs</span> <span class="o">||</span> <span class="s1">&#39;object&#39;</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="nx">gs</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">str</span> <span class="o">||</span> <span class="o">!</span><span class="nx">str</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">gs</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
  
  <span class="kd">var</span> <span class="nx">hash</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="nx">symbols</span> <span class="o">=</span> <span class="s1">&#39;Ssrip&#39;</span><span class="p">,</span>
    <span class="nx">properties</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;state&#39;</span><span class="p">,</span> <span class="s1">&#39;step&#39;</span><span class="p">,</span> <span class="s1">&#39;round&#39;</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="s1">&#39;paused&#39;</span><span class="p">];</span>
  
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">str</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">idx</span> <span class="o">=</span> <span class="nx">symbols</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">str</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span> 
    <span class="nx">hash</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">idx</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">str</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">:</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">gs</span><span class="p">[</span><span class="nx">properties</span><span class="p">[</span><span class="nx">idx</span><span class="p">]]);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">hash</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamestate.compare--static-">
  <h2>
    <a href="#gamestate.compare--static-" class="pilcrow">&#182;</a>
    GameState.compare (static)
  </h2>
</div>

  </div>
  <div class="body"><p>Compares two GameState objects|hash strings and returns</p>

<ul>
<li>0 if they represent the same game state</li>
<li>a positive number if gs1 is ahead of gs2 </li>
<li>a negative number if gs2 is ahead of gs1 </li>
</ul>

<p>If the strict parameter is set, also the <code>is</code> property is compared,
otherwise only <code>round</code>, <code>state</code>, and <code>step</code></p>

<p>The accepted hash string format is the following: 'S.s.r.i.p'.
Refer to <code>GameState.toHash</code> for the semantic of the characters.</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span>gs1</span>
      <span class="dox_type">GameState</span>
      <span class="dox_type">string</span>
      <span>The first GameState object|string to compare</span>
    </div>
    <div class="dox_tag_detail">
      <span>gs2</span>
      <span class="dox_type">GameState</span>
      <span class="dox_type">string</span>
      <span>The second GameState object|string to compare</span>
    </div>
    <div class="dox_tag_detail">
      <span>strict</span>
      <span class="dox_type">Boolean</span>
      <span>If TRUE, also the <code>is</code> attribute is checked</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span></span>
      <span class="dox_type">Number</span>
      <span>result The result of the comparison</span>
    </div>
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">GameState.toHash (static)</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameState</span><span class="p">.</span><span class="nx">compare</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">gs1</span><span class="p">,</span> <span class="nx">gs2</span><span class="p">,</span> <span class="nx">strict</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">gs1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">gs2</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">gs2</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">gs1</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

  <span class="nx">strict</span> <span class="o">=</span> <span class="nx">strict</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17">&#182;</a>
</div>
<p>Convert the parameters to objects, if an hash string was passed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;string&#39;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">gs1</span><span class="p">)</span> <span class="nx">gs1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GameState</span><span class="p">(</span><span class="nx">gs1</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;string&#39;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">gs2</span><span class="p">)</span> <span class="nx">gs2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GameState</span><span class="p">(</span><span class="nx">gs2</span><span class="p">);</span>
  
  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18">&#182;</a>
</div>
<!--        
    console.log('COMPARAING GSs','DEBUG')
    console.log(gs1,'DEBUG');
    console.log(gs2,'DEBUG');
-->
        </td>
        <td class="code highlight"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">gs1</span><span class="p">.</span><span class="nx">state</span> <span class="o">-</span> <span class="nx">gs2</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
  
  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="nx">gs1</span><span class="p">.</span><span class="nx">round</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">result</span> <span class="o">=</span> <span class="nx">gs1</span><span class="p">.</span><span class="nx">round</span> <span class="o">-</span> <span class="nx">gs2</span><span class="p">.</span><span class="nx">round</span><span class="p">;</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="nx">result</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="nx">gs1</span><span class="p">.</span><span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">result</span> <span class="o">=</span> <span class="nx">gs1</span><span class="p">.</span><span class="nx">step</span> <span class="o">-</span> <span class="nx">gs2</span><span class="p">.</span><span class="nx">step</span><span class="p">;</span>
      
      <span class="k">if</span> <span class="p">(</span><span class="nx">strict</span> <span class="o">&amp;&amp;</span> <span class="nx">result</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="nx">gs1</span><span class="p">.</span><span class="nx">is</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">result</span> <span class="o">=</span> <span class="nx">gs1</span><span class="p">.</span><span class="nx">is</span> <span class="o">-</span> <span class="nx">gs2</span><span class="p">.</span><span class="nx">is</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  
  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19">&#182;</a>
</div>
<!-- console.log('EQUAL? ' + result); -->
        </td>
        <td class="code highlight"><div class="highlight"><pre>  
  <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamestate.stringify--static-">
  <h2>
    <a href="#gamestate.stringify--static-" class="pilcrow">&#182;</a>
    GameState.stringify (static)
  </h2>
</div>

  </div>
  <div class="body"><p>Converts an object GameState-like to its string representation</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span>gs</span>
      <span class="dox_type">GameState</span>
      <span>The object to convert to string    </span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span></span>
      <span class="dox_type">string</span>
      <span>out The string representation of a GameState object</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameState</span><span class="p">.</span><span class="nx">stringify</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">gs</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">gs</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GameState</span><span class="p">(</span><span class="nx">gs</span><span class="p">).</span><span class="nx">toHash</span><span class="p">(</span><span class="s1">&#39;(r) S.s_i&#39;</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">gs</span><span class="p">.</span><span class="nx">paused</span><span class="p">)</span> <span class="nx">out</span> <span class="o">+=</span> <span class="s1">&#39; [P]&#39;</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">out</span><span class="p">;</span>
<span class="p">};</span> </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="closure">
  <h2>
    <a href="#closure" class="pilcrow">&#182;</a>
    Closure
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="p">})(</span>
  <span class="s1">&#39;undefined&#39;</span> <span class="o">!=</span> <span class="k">typeof</span> <span class="nx">node</span> <span class="o">?</span> <span class="nx">node</span> <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span>
  <span class="p">,</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">!=</span> <span class="k">typeof</span> <span class="nx">node</span> <span class="o">?</span> <span class="nx">node</span> <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">exports</span>
<span class="p">);</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
