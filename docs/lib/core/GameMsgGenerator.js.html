<!DOCTYPE html>
<html>
<head>
  <title>GameMsgGenerator.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = '../../', thisFile = 'lib/core/GameMsgGenerator.js', defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h1">
        <a href="#gamemsggenerator">GameMsgGenerator</a>
      </div>
      <div class="heading h2">
        <a href="#global-scope">Global scope</a>
      </div>
      <div class="heading h2">
        <a href="#gamemsggenerator-constructor">GameMsgGenerator constructor</a>
      </div>
      <div class="heading h2">
        <a href="#general-methods">General methods</a>
      </div>
      <div class="heading h3">
        <a href="#gamemsggenerator.create">GameMsgGenerator.create</a>
      </div>
      <div class="heading h2">
        <a href="#hi-messages">HI messages</a>
      </div>
      <div class="heading h3">
        <a href="#gamemsggenerator.createhi">GameMSgGenerator.createHI</a>
      </div>
      <div class="heading h2">
        <a href="#state-messages">STATE messages</a>
      </div>
      <div class="heading h2">
        <a href="#plist-messages">PLIST messages</a>
      </div>
      <div class="heading h3">
        <a href="#gamemsggenerator.sayplist">GameMsgGenerator.sayPLIST</a>
      </div>
      <div class="heading h3">
        <a href="#gamemsggenerator.setplist">GameMSgGenerator.setPLIST</a>
      </div>
      <div class="heading h3">
        <a href="#gamemsggenerator.getplist">GameMSgGenerator.getPLIST</a>
      </div>
      <div class="heading h3">
        <a href="#gamemsggenerator.createplist">GameMSgGenerator.createPLIST</a>
      </div>
      <div class="heading h2">
        <a href="#txt-messages">TXT messages</a>
      </div>
      <div class="heading h3">
        <a href="#gamemsggenerator.createtxt">GameMSgGenerator.createTXT</a>
      </div>
      <div class="heading h2">
        <a href="#data-messages">DATA messages</a>
      </div>
      <div class="heading h3">
        <a href="#gamemsggenerator.saydata">GameMSgGenerator.sayDATA</a>
      </div>
      <div class="heading h3">
        <a href="#gamemsggenerator.setdata">GameMSgGenerator.setDATA</a>
      </div>
      <div class="heading h3">
        <a href="#gamemsggenerator.getdata">GameMSgGenerator.getDATA</a>
      </div>
      <div class="heading h3">
        <a href="#gamemsggenerator.createdata">GameMSgGenerator.createDATA</a>
      </div>
      <div class="heading h2">
        <a href="#ack-messages">ACK messages</a>
      </div>
      <div class="heading h3">
        <a href="#gamemsggenerator.setack">GameMSgGenerator.setACK</a>
      </div>
      <div class="heading h2">
        <a href="#closure">Closure</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamemsggenerator">
  <h1>
    <a href="#gamemsggenerator" class="pilcrow">&#182;</a>
    GameMsgGenerator
  </h1>
</div>

  </div>
  <div class="body"><p>Copyright(c) 2012 Stefano Balietti
MIT Licensed </p>

<p><code>nodeGame</code> component rensponsible creating messages </p>

<p>Static factory of objects of type <code>GameMsg</code>.</p>

<p>All message are reliable, but TXT messages.</p>

<p>@see GameMSg
  @see node.target
  @see node.action</p>

<hr />
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="global-scope">
  <h2>
    <a href="#global-scope" class="pilcrow">&#182;</a>
    Global scope
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>  
<span class="kd">var</span> <span class="nx">GameMsg</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">GameMsg</span><span class="p">,</span>
  <span class="nx">GameStage</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">GameStage</span><span class="p">,</span>
  <span class="nx">Player</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">Player</span><span class="p">,</span>
  <span class="nx">JSUS</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">JSUS</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span>
  <span class="nx">action</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">action</span><span class="p">;</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">GameMsgGenerator</span> <span class="o">=</span> <span class="nx">GameMsgGenerator</span><span class="p">;</span> </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamemsggenerator-constructor">
  <h2>
    <a href="#gamemsggenerator-constructor" class="pilcrow">&#182;</a>
    GameMsgGenerator constructor
  </h2>
</div>

  </div>
  <div class="body"><p>Creates an instance of GameMSgGenerator</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">GameMsgGenerator</span> <span class="p">()</span> <span class="p">{}</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="general-methods">
  <h2>
    <a href="#general-methods" class="pilcrow">&#182;</a>
    General methods
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamemsggenerator.create">
  <h3>
    <a href="#gamemsggenerator.create" class="pilcrow">&#182;</a>
    GameMsgGenerator.create
  </h3>
</div>

  </div>
  <div class="body"><p>Primitive for creating any type of game-message</p>

<p>Merges a set of default settings with the object passed
as input parameter</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameMsgGenerator</span><span class="p">.</span><span class="nx">create</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">gameMsg</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">session</span><span class="o">:</span> <span class="p">(</span><span class="s1">&#39;undefined&#39;</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">session</span><span class="p">)</span> <span class="o">?</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">session</span> <span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">socket</span><span class="p">.</span><span class="nx">session</span><span class="p">,</span> 
    <span class="nx">stage</span><span class="o">:</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">stage</span> <span class="o">||</span> <span class="nx">node</span><span class="p">.</span><span class="nx">game</span><span class="p">.</span><span class="nx">stage</span><span class="p">,</span>
    <span class="nx">action</span><span class="o">:</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">action</span> <span class="o">||</span> <span class="nx">action</span><span class="p">.</span><span class="nx">SAY</span><span class="p">,</span>
    <span class="nx">target</span><span class="o">:</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">target</span> <span class="o">||</span> <span class="nx">target</span><span class="p">.</span><span class="nx">DATA</span><span class="p">,</span>
    <span class="nx">from</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">sid</span><span class="p">,</span>
    <span class="nx">to</span><span class="o">:</span> <span class="p">(</span><span class="s1">&#39;undefined&#39;</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span> <span class="o">?</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">to</span> <span class="o">:</span> <span class="s1">&#39;SERVER&#39;</span><span class="p">,</span>
    <span class="nx">text</span><span class="o">:</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">text</span> <span class="o">||</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">data</span><span class="o">:</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">data</span> <span class="o">||</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">priority</span><span class="o">:</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">priority</span> <span class="o">||</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">reliable</span><span class="o">:</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">reliable</span> <span class="o">||</span> <span class="mi">1</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="k">new</span> <span class="nx">GameMsg</span><span class="p">(</span><span class="nx">gameMsg</span><span class="p">);</span>

<span class="p">};</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="hi-messages">
  <h2>
    <a href="#hi-messages" class="pilcrow">&#182;</a>
    HI messages
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamemsggenerator.createhi">
  <h3>
    <a href="#gamemsggenerator.createhi" class="pilcrow">&#182;</a>
    GameMSgGenerator.createHI
  </h3>
</div>

  </div>
  <div class="body"><p>Notice: this is different from the server;</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">player</span>
      <span class="dox_type">Player</span>
      <span>The player to communicate</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">to</span>
      <span class="dox_type">string</span>
      <span>The recipient of the message</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">reliable</span>
      <span class="dox_type">boolean</span>
      <span>Optional. Experimental. Requires an acknowledgment</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">GameMsg</span>
      <span class="dox_type">boolean</span>
      <span>The game message, or FALSE if error in the input parameters is detected</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameMsgGenerator</span><span class="p">.</span><span class="nx">createHI</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">player</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">player</span> <span class="o">=</span> <span class="nx">player</span> <span class="o">||</span> <span class="nx">node</span><span class="p">.</span><span class="nx">player</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">player</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="nx">reliable</span> <span class="o">=</span> <span class="nx">reliable</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
  
  <span class="k">return</span> <span class="k">new</span> <span class="nx">GameMsg</span><span class="p">(</span> <span class="p">{</span>
                  <span class="nx">session</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">gsc</span><span class="p">.</span><span class="nx">session</span><span class="p">,</span>
                  <span class="nx">stage</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">game</span><span class="p">.</span><span class="nx">stage</span><span class="p">,</span>
                  <span class="nx">action</span><span class="o">:</span> <span class="nx">action</span><span class="p">.</span><span class="nx">SAY</span><span class="p">,</span>
                  <span class="nx">target</span><span class="o">:</span> <span class="nx">target</span><span class="p">.</span><span class="nx">HI</span><span class="p">,</span>
                  <span class="nx">from</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">sid</span><span class="p">,</span>
                  <span class="nx">to</span><span class="o">:</span> <span class="nx">to</span><span class="p">,</span>
                  <span class="nx">text</span><span class="o">:</span> <span class="k">new</span> <span class="nx">Player</span><span class="p">(</span><span class="nx">player</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; ready.&#39;</span><span class="p">,</span>
                  <span class="nx">data</span><span class="o">:</span> <span class="nx">player</span><span class="p">,</span>
                  <span class="nx">priority</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
                  <span class="nx">reliable</span><span class="o">:</span> <span class="nx">reliable</span>
  <span class="p">});</span>
<span class="p">};</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="state-messages">
  <h2>
    <a href="#state-messages" class="pilcrow">&#182;</a>
    STATE messages
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9">&#182;</a>
</div>
<p>/**
* ### GameMSgGenerator.saySTATE
* 
* Creates a say.STATE message
* 
* Notice: stage is different from node.game.stage
* 
* @param {GameStage} stage The game-stage to communicate
* @param {string} to The recipient of the message
* @param {boolean} reliable Optional. Experimental. Requires an acknowledgment
* 
* @return {GameMsg|boolean} The game message, or FALSE if error in the input parameters is detected
* 
*     @see GameStage
*/
GameMsgGenerator.saySTATE = function (stage, to, reliable) {
return this.createSTATE(action.SAY, stage, to, reliable);
};</p>

<p>/**
* ### GameMSgGenerator.setSTATE
* 
* Creates a set.STATE message
* 
* @param {GameStage} stage The game-stage to communicate
* @param {string} to The recipient of the message
* @param {boolean} reliable Optional. Experimental. Requires an acknowledgment
* 
* @return {GameMsg|boolean} The game message, or FALSE if error in the input parameters is detected
* 
*     @see GameStage
*/
GameMsgGenerator.setSTATE = function (stage, to, reliable) {
return this.createSTATE(action.SET, stage, to, reliable);
};</p>

<p>/**
* ### GameMSgGenerator.getSTATE
* 
* Experimental. Creates a get.STATE message
* 
* @param {GameStage} stage The game-stage to communicate
* @param {string} to The recipient of the message
* @param {boolean} reliable Optional. Experimental. Requires an acknowledgment
* 
* @return {GameMsg|boolean} The game message, or FALSE if error in the input parameters is detected
* 
*     @see GameStage
*/
GameMsgGenerator.getSTATE = function (stage, to, reliable) {
return this.createSTATE(action.GET, stage, to,reliable);
};</p>

<p>/**
* ### GameMSgGenerator.createSTATE
* 
* Creates a STATE message
* 
* @param {string} action A nodeGame action (e.g. 'get' or 'set')
* @param {GameStage} stage The game-stage to communicate
* @param {string} to Optional. The recipient of the message. Defaults, SERVER
* @param {boolean} reliable Optional. Experimental. Requires an acknowledgment
* 
* @return {GameMsg|boolean} The game message, or FALSE if error in the input parameters is detected
* 
*     @see GameStage
*/
GameMsgGenerator.createSTATE = function (action, stage, to, reliable) {
if (!action || !stage) return false;
to = to || 'SERVER';
reliable = reliable || 1;
return new GameMsg({
                    session: node.gsc.session,
                    stage: node.game.stage,
                    action: action,
                    target: target.STATE,
                    from: node.player.sid,
                    to: to,
                    text: 'New State: ' + GameStage.stringify(stage),
                    data: stage,
                    priority: null,
                    reliable: reliable
});
};</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="plist-messages">
  <h2>
    <a href="#plist-messages" class="pilcrow">&#182;</a>
    PLIST messages
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamemsggenerator.sayplist">
  <h3>
    <a href="#gamemsggenerator.sayplist" class="pilcrow">&#182;</a>
    GameMsgGenerator.sayPLIST
  </h3>
</div>

  </div>
  <div class="body"><p>Creates a say.PLIST message</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">plist</span>
      <span class="dox_type">PlayerList</span>
      <span>The player-list to communicate</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">to</span>
      <span class="dox_type">string</span>
      <span>The recipient of the message</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">reliable</span>
      <span class="dox_type">boolean</span>
      <span>Optional. Experimental. Requires an acknowledgment</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">GameMsg</span>
      <span class="dox_type">boolean</span>
      <span>The game message, or FALSE if error in the input parameters is detected

@see PlayerList</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameMsgGenerator</span><span class="p">.</span><span class="nx">sayPLIST</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">plist</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">createPLIST</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">SAY</span><span class="p">,</span> <span class="nx">plist</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamemsggenerator.setplist">
  <h3>
    <a href="#gamemsggenerator.setplist" class="pilcrow">&#182;</a>
    GameMSgGenerator.setPLIST
  </h3>
</div>

  </div>
  <div class="body"><p>Creates a set.PLIST message</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">plist</span>
      <span class="dox_type">PlayerList</span>
      <span>The player-list to communicate</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">to</span>
      <span class="dox_type">string</span>
      <span>The recipient of the message</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">reliable</span>
      <span class="dox_type">boolean</span>
      <span>Optional. Experimental. Requires an acknowledgment</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">GameMsg</span>
      <span class="dox_type">boolean</span>
      <span>The game message, or FALSE if error in the input parameters is detected

@see PlayerList</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameMsgGenerator</span><span class="p">.</span><span class="nx">setPLIST</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">plist</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">createPLIST</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">SET</span><span class="p">,</span> <span class="nx">plist</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamemsggenerator.getplist">
  <h3>
    <a href="#gamemsggenerator.getplist" class="pilcrow">&#182;</a>
    GameMSgGenerator.getPLIST
  </h3>
</div>

  </div>
  <div class="body"><p>Experimental. Creates a get.PLIST message</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">plist</span>
      <span class="dox_type">PlayerList</span>
      <span>The player-list to communicate</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">to</span>
      <span class="dox_type">string</span>
      <span>The recipient of the message</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">reliable</span>
      <span class="dox_type">boolean</span>
      <span>Optional. Experimental. Requires an acknowledgment</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">GameMsg</span>
      <span class="dox_type">boolean</span>
      <span>The game message, or FALSE if error in the input parameters is detected

@see PlayerList</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameMsgGenerator</span><span class="p">.</span><span class="nx">getPLIST</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">plist</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">createPLIST</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">GET</span><span class="p">,</span> <span class="nx">plist</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamemsggenerator.createplist">
  <h3>
    <a href="#gamemsggenerator.createplist" class="pilcrow">&#182;</a>
    GameMSgGenerator.createPLIST
  </h3>
</div>

  </div>
  <div class="body"><p>Creates a PLIST message</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">action</span>
      <span class="dox_type">string</span>
      <span>A nodeGame action (e.g. 'get' or 'set')</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">plist</span>
      <span class="dox_type">PlayerList</span>
      <span>The player-list to communicate</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">to</span>
      <span class="dox_type">string</span>
      <span>Optional. The recipient of the message. Defaults, SERVER</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">reliable</span>
      <span class="dox_type">boolean</span>
      <span>Optional. Experimental. Requires an acknowledgment</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">GameMsg</span>
      <span class="dox_type">boolean</span>
      <span>The game message, or FALSE if error in the input parameters is detected

@see PlayerList</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameMsgGenerator</span><span class="p">.</span><span class="nx">createPLIST</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">action</span><span class="p">,</span> <span class="nx">plist</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">plist</span> <span class="o">=</span> <span class="nx">plist</span> <span class="o">||</span> <span class="o">!</span><span class="nx">node</span><span class="p">.</span><span class="nx">game</span> <span class="o">||</span> <span class="nx">node</span><span class="p">.</span><span class="nx">game</span><span class="p">.</span><span class="nx">pl</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">action</span> <span class="o">||</span> <span class="o">!</span><span class="nx">plist</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  
  <span class="nx">to</span> <span class="o">=</span> <span class="nx">to</span> <span class="o">||</span> <span class="s1">&#39;SERVER&#39;</span><span class="p">;</span>
  <span class="nx">reliable</span> <span class="o">=</span> <span class="nx">reliable</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
  
  <span class="k">return</span> <span class="k">new</span> <span class="nx">GameMsg</span><span class="p">({</span>
            <span class="nx">session</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">gsc</span><span class="p">.</span><span class="nx">session</span><span class="p">,</span> 
            <span class="nx">stage</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">game</span><span class="p">.</span><span class="nx">stage</span><span class="p">,</span>
            <span class="nx">action</span><span class="o">:</span> <span class="nx">action</span><span class="p">,</span>
            <span class="nx">target</span><span class="o">:</span> <span class="nx">target</span><span class="p">.</span><span class="nx">PLIST</span><span class="p">,</span>
            <span class="nx">from</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">sid</span><span class="p">,</span>
            <span class="nx">to</span><span class="o">:</span> <span class="nx">to</span><span class="p">,</span>
            <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;List of Players: &#39;</span> <span class="o">+</span> <span class="nx">plist</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
            <span class="nx">data</span><span class="o">:</span> <span class="nx">plist</span><span class="p">.</span><span class="nx">pl</span><span class="p">,</span>
            <span class="nx">priority</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nx">reliable</span><span class="o">:</span> <span class="nx">reliable</span>
  <span class="p">});</span>
<span class="p">};</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="txt-messages">
  <h2>
    <a href="#txt-messages" class="pilcrow">&#182;</a>
    TXT messages
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamemsggenerator.createtxt">
  <h3>
    <a href="#gamemsggenerator.createtxt" class="pilcrow">&#182;</a>
    GameMSgGenerator.createTXT
  </h3>
</div>

  </div>
  <div class="body"><p>Creates a say.TXT message</p>

<p>TXT messages are always of action 'say'</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">text</span>
      <span class="dox_type">string</span>
      <span>The text to communicate</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">to</span>
      <span class="dox_type">string</span>
      <span>The recipient of the message</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">reliable</span>
      <span class="dox_type">boolean</span>
      <span>Optional. Experimental. Requires an acknowledgment</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">GameMsg</span>
      <span class="dox_type">boolean</span>
      <span>The game message, or FALSE if error in the input parameters is detected</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameMsgGenerator</span><span class="p">.</span><span class="nx">createTXT</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">text</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="nx">reliable</span> <span class="o">=</span> <span class="nx">reliable</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
  
  <span class="k">return</span> <span class="k">new</span> <span class="nx">GameMsg</span><span class="p">({</span>
            <span class="nx">session</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">gsc</span><span class="p">.</span><span class="nx">session</span><span class="p">,</span>
            <span class="nx">stage</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">game</span><span class="p">.</span><span class="nx">stage</span><span class="p">,</span>
            <span class="nx">action</span><span class="o">:</span> <span class="nx">action</span><span class="p">.</span><span class="nx">SAY</span><span class="p">,</span>
            <span class="nx">target</span><span class="o">:</span> <span class="nx">target</span><span class="p">.</span><span class="nx">TXT</span><span class="p">,</span>
            <span class="nx">from</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">sid</span><span class="p">,</span>
            <span class="nx">to</span><span class="o">:</span> <span class="nx">to</span><span class="p">,</span>
            <span class="nx">text</span><span class="o">:</span> <span class="nx">text</span><span class="p">,</span>
            <span class="nx">data</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nx">priority</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nx">reliable</span><span class="o">:</span> <span class="nx">reliable</span>
  <span class="p">});</span>
<span class="p">};</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="data-messages">
  <h2>
    <a href="#data-messages" class="pilcrow">&#182;</a>
    DATA messages
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamemsggenerator.saydata">
  <h3>
    <a href="#gamemsggenerator.saydata" class="pilcrow">&#182;</a>
    GameMSgGenerator.sayDATA
  </h3>
</div>

  </div>
  <div class="body"><p>Creates a say.DATA message</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">data</span>
      <span class="dox_type">object</span>
      <span>An object to exchange</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">to</span>
      <span class="dox_type">string</span>
      <span>The recipient of the message</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">reliable</span>
      <span class="dox_type">boolean</span>
      <span>Optional. Experimental. Requires an acknowledgment</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">GameMsg</span>
      <span class="dox_type">boolean</span>
      <span>The game message, or FALSE if error in the input parameters is detected</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameMsgGenerator</span><span class="p">.</span><span class="nx">sayDATA</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">createDATA</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">SAY</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamemsggenerator.setdata">
  <h3>
    <a href="#gamemsggenerator.setdata" class="pilcrow">&#182;</a>
    GameMSgGenerator.setDATA
  </h3>
</div>

  </div>
  <div class="body"><p>Creates a set.DATA message</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">data</span>
      <span class="dox_type">object</span>
      <span>An object to exchange</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">to</span>
      <span class="dox_type">string</span>
      <span>The recipient of the message</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">reliable</span>
      <span class="dox_type">boolean</span>
      <span>Optional. Experimental. Requires an acknowledgment</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">GameMsg</span>
      <span class="dox_type">boolean</span>
      <span>The game message, or FALSE if error in the input parameters is detected</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameMsgGenerator</span><span class="p">.</span><span class="nx">setDATA</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">createDATA</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">SET</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamemsggenerator.getdata">
  <h3>
    <a href="#gamemsggenerator.getdata" class="pilcrow">&#182;</a>
    GameMSgGenerator.getDATA
  </h3>
</div>

  </div>
  <div class="body"><p>Experimental. Creates a say.DATA message</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">data</span>
      <span class="dox_type">object</span>
      <span>An object to exchange</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">to</span>
      <span class="dox_type">string</span>
      <span>The recipient of the message</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">reliable</span>
      <span class="dox_type">boolean</span>
      <span>Optional. Experimental. Requires an acknowledgment</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">GameMsg</span>
      <span class="dox_type">boolean</span>
      <span>The game message, or FALSE if error in the input parameters is detected</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameMsgGenerator</span><span class="p">.</span><span class="nx">getDATA</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">createDATA</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">GET</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamemsggenerator.createdata">
  <h3>
    <a href="#gamemsggenerator.createdata" class="pilcrow">&#182;</a>
    GameMSgGenerator.createDATA
  </h3>
</div>

  </div>
  <div class="body"><p>Creates a DATA message</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">action</span>
      <span class="dox_type">string</span>
      <span>A nodeGame action (e.g. 'get' or 'set')</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">data</span>
      <span class="dox_type">object</span>
      <span>An object to exchange</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">to</span>
      <span class="dox_type">string</span>
      <span>The recipient of the message</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">reliable</span>
      <span class="dox_type">boolean</span>
      <span>Optional. Experimental. Requires an acknowledgment</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">GameMsg</span>
      <span class="dox_type">boolean</span>
      <span>The game message, or FALSE if error in the input parameters is detected</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameMsgGenerator</span><span class="p">.</span><span class="nx">createDATA</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">action</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">action</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="nx">reliable</span> <span class="o">=</span> <span class="nx">reliable</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
  <span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span> <span class="o">||</span> <span class="s1">&#39;data msg&#39;</span><span class="p">;</span>
  
  <span class="k">return</span> <span class="k">new</span> <span class="nx">GameMsg</span><span class="p">({</span>
            <span class="nx">session</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">gsc</span><span class="p">.</span><span class="nx">session</span><span class="p">,</span> 
            <span class="nx">stage</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">game</span><span class="p">.</span><span class="nx">stage</span><span class="p">,</span>
            <span class="nx">action</span><span class="o">:</span> <span class="nx">action</span><span class="p">,</span>
            <span class="nx">target</span><span class="o">:</span> <span class="nx">target</span><span class="p">.</span><span class="nx">DATA</span><span class="p">,</span>
            <span class="nx">from</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">sid</span><span class="p">,</span>
            <span class="nx">to</span><span class="o">:</span> <span class="nx">to</span><span class="p">,</span>
            <span class="nx">text</span><span class="o">:</span> <span class="nx">text</span><span class="p">,</span>
            <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
            <span class="nx">priority</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nx">reliable</span><span class="o">:</span> <span class="nx">reliable</span>
  <span class="p">});</span>
<span class="p">};</span></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="ack-messages">
  <h2>
    <a href="#ack-messages" class="pilcrow">&#182;</a>
    ACK messages
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gamemsggenerator.setack">
  <h3>
    <a href="#gamemsggenerator.setack" class="pilcrow">&#182;</a>
    GameMSgGenerator.setACK
  </h3>
</div>

  </div>
  <div class="body"><p>Experimental. Undocumented (for now)</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nx">GameMsgGenerator</span><span class="p">.</span><span class="nx">createACK</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">gm</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">reliable</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">gm</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="nx">reliable</span> <span class="o">=</span> <span class="nx">reliable</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
  
  <span class="kd">var</span> <span class="nx">newgm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GameMsg</span><span class="p">({</span>
              <span class="nx">session</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">gsc</span><span class="p">.</span><span class="nx">session</span><span class="p">,</span> 
              <span class="nx">stage</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">game</span><span class="p">.</span><span class="nx">stage</span><span class="p">,</span>
              <span class="nx">action</span><span class="o">:</span> <span class="nx">action</span><span class="p">.</span><span class="nx">SAY</span><span class="p">,</span>
              <span class="nx">target</span><span class="o">:</span> <span class="nx">target</span><span class="p">.</span><span class="nx">ACK</span><span class="p">,</span>
              <span class="nx">from</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">sid</span><span class="p">,</span>
              <span class="nx">to</span><span class="o">:</span> <span class="nx">to</span><span class="p">,</span>
              <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;Msg &#39;</span> <span class="o">+</span> <span class="nx">gm</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">&#39; correctly received&#39;</span><span class="p">,</span>
              <span class="nx">data</span><span class="o">:</span> <span class="nx">gm</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
              <span class="nx">priority</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
              <span class="nx">reliable</span><span class="o">:</span> <span class="nx">reliable</span>
  <span class="p">});</span>
  
  <span class="k">if</span> <span class="p">(</span><span class="nx">gm</span><span class="p">.</span><span class="nx">forward</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">newgm</span><span class="p">.</span><span class="nx">forward</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  
  <span class="k">return</span> <span class="nx">newgm</span><span class="p">;</span>
<span class="p">};</span> </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="closure">
  <h2>
    <a href="#closure" class="pilcrow">&#182;</a>
    Closure
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="p">})(</span>
  <span class="s1">&#39;undefined&#39;</span> <span class="o">!=</span> <span class="k">typeof</span> <span class="nx">node</span> <span class="o">?</span> <span class="nx">node</span> <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span>
  <span class="s1">&#39;undefined&#39;</span> <span class="o">!=</span> <span class="k">typeof</span> <span class="nx">node</span> <span class="o">?</span> <span class="nx">node</span> <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">exports</span>
<span class="p">);</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
